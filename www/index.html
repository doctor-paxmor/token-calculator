<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTG Token Calculator</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="calculator-container">
        <!-- Calculator Display -->
        <div class="calculator-display">
            <div class="history-corner" id="historyLog"></div>
            <div class="main-number" id="mainNumber">0</div>
        </div>
        
        <!-- Status Bar -->
        <div class="status-grid">
            <div class="status-cell">
                <div class="status-label">TOKENS</div>
                <div class="status-number total-color" id="status0">0</div>
            </div>
            <div class="status-cell">
                <div class="status-label">VALUE</div>
                <div class="status-number ready-color" id="status1">0</div>
            </div>
            <div class="status-cell">
                <div class="status-label">UNTAPPED</div>
                <div class="status-number ready-color" id="status2">0</div>
            </div>
            <div class="status-cell">
                <div class="status-label">TAPPED</div>
                <div class="status-number used-color" id="status3">0</div>
            </div>
        </div>
        
        <!-- Button Area -->
        <div class="button-area">
            <!-- Modifiers -->
            <div class="button-group">
                <div style="font-size: 10px; color: #888; margin-bottom: 4px; text-align: center;">TOKEN MULTIPLIERS</div>
                <div class="button-row row-4">
                    <button class="btn toggle-btn" id="doublingToggle" onclick="toggleModifier('doublingSeasons')">
                        Doubling<br>Season
                    </button>
                    <button class="btn toggle-btn" id="parallelToggle" onclick="toggleModifier('parallelLives')">
                        Parallel<br>Lives
                    </button>
                    <button class="btn toggle-btn" id="mondrakToggle" onclick="toggleModifier('mondrak')">
                        Mondrak<br>Glory
                    </button>
                    <button class="btn toggle-btn" id="anointedToggle" onclick="toggleModifier('anointedProcession')">
                        Anointed<br>Procession
                    </button>
                </div>
                <div class="button-row row-3">
                    <button class="btn toggle-btn" id="primalToggle" onclick="toggleModifier('primalVigor')">
                        Primal<br>Vigor
                    </button>
                    <button class="btn toggle-btn" id="adrixToggle" onclick="toggleModifier('adrixNev')">
                        Adrix &<br>Nev
                    </button>
                    <button class="btn toggle-btn" id="ojerToggle" onclick="toggleModifier('ojerTaq')">
                        Ojer<br>Taq
                    </button>
                </div>
            </div>
            
            <!-- Main Actions (Dynamic) -->
            <div class="button-group">
                <div class="button-row row-2" id="mainActionRow">
                    <button class="btn primary-btn">Loading...</button>
                </div>
            </div>
            
            <!-- Add/Remove Tokens -->
            <div class="button-group">
                <div style="font-size: 10px; color: #888; margin-bottom: 4px; text-align: center;">ADD/REMOVE TOKENS</div>
                <div class="button-row row-4">
                    <button class="btn success-btn" onclick="addTokensDirect(1)">+1</button>
                    <button class="btn success-btn" onclick="addTokensDirect(5)">+5</button>
                    <button class="btn danger-btn" onclick="removeTokens(1)">-1</button>
                    <button class="btn danger-btn" onclick="removeTokens(5)">-5</button>
                </div>
            </div>
            
            <!-- Tap/Untap Controls -->
            <div class="button-group">
                <div style="font-size: 10px; color: #888; margin-bottom: 4px; text-align: center;">TAP/UNTAP TOKENS</div>
                <div class="button-row row-4">
                    <button class="btn warning-btn" onclick="tapTokens(1)">TAP 1</button>
                    <button class="btn warning-btn" onclick="tapAll()">TAP ALL</button>
                    <button class="btn success-btn" onclick="untapTokens(1)">UNTAP 1</button>
                    <button class="btn success-btn" onclick="untapAll()">UNTAP ALL</button>
                </div>
            </div>
            
            <!-- Abilities (Dynamic) -->
            <div class="button-group">
                <div class="button-row row-3" id="abilityRow">
                    <button class="btn purple-btn">Loading...</button>
                </div>
                
                <div class="commander-info" id="commanderInfo">
                    <span>Loading Commander...</span>
                </div>
            </div>
            
            <!-- Reset & Commander Selection -->
            <div class="button-group">
                <div class="button-row row-1" style="grid-template-columns: 1fr;">
                    <button onclick="resetBattlefield()" class="btn danger-btn">
                        RESET ALL
                    </button>
                </div>
                
                <div style="margin-top: 8px;">
                    <div style="font-size: 10px; color: #888; margin-bottom: 4px; text-align: center;">SELECT COMMANDER</div>
                    <select id="commanderSelect" onchange="changeCommander()" class="commander-select">
                        <option value="">Loading commanders...</option>
                    </select>
                </div>
            </div>
        </div>
        
        <!-- Commander Art -->
        <div class="commander-art">
            <img id="commanderArt" src="" alt="Commander Art">
        </div>

        <!-- Ad Dismiss Button -->
        <div class="ad-banner" id="adBanner">
            <button class="dismiss-btn" onclick="dismissAd()">‚ùé Hide Ad</button>
        </div>
    </div>

    <!-- Hidden inputs -->
    <input type="checkbox" id="doublingSeasons" style="display: none;">
    <input type="checkbox" id="parallelLives" style="display: none;">
    <input type="checkbox" id="mondrak" style="display: none;">
    <input type="checkbox" id="anointedProcession" style="display: none;">
    <input type="checkbox" id="primalVigor" style="display: none;">
    <input type="checkbox" id="adrixNev" style="display: none;">
    <input type="checkbox" id="ojerTaq" style="display: none;">

    <!-- Load Scripts -->
    <script src="js/core.js"></script>
    <script src="js/tokenLogic.js"></script>
    <script src="js/ui.js"></script>
    <script>
        // Initialize app when everything loads
        document.addEventListener('DOMContentLoaded', async function() {
            await loadAvailableCommanders();
            initializeApp();
        });
    </script>
</body>
</html>